"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.run = void 0;
var minimist_1 = __importDefault(require("minimist"));
var getConfig_1 = __importDefault(require("./getConfig"));
var getInputs_1 = __importDefault(require("./getInputs"));
var buildRouteFile_1 = __importDefault(require("./buildRouteFile"));
var writeRouteFile_1 = __importDefault(require("./writeRouteFile"));
var watchInputDir_1 = __importDefault(require("./watchInputDir"));
var run = function (args) {
    var argv = minimist_1.default(args, {
        string: ['version', 'config', 'watch', 'baseurl'],
        alias: { v: 'version', c: 'config', w: 'watch', u: 'baseurl' }
    });
    var config = getConfig_1.default(argv.config);
    // eslint-disable-next-line no-unused-expressions
    argv.version !== undefined
        ? console.log("v" + require('../../package.json').version)
        : argv.watch !== undefined
            ? getInputs_1.default(config.input).forEach(function (input) {
                writeRouteFile_1.default(buildRouteFile_1.default(input, config, argv.baseurl));
                watchInputDir_1.default(input, function () { return writeRouteFile_1.default(buildRouteFile_1.default(input, config, argv.baseurl)); });
            })
            : getInputs_1.default(config.input)
                .map(function (input) { return buildRouteFile_1.default(input, config, argv.baseurl); })
                .forEach(writeRouteFile_1.default);
};
exports.run = run;
//# sourceMappingURL=cli.js.map